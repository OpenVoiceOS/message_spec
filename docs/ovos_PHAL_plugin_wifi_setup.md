# PHAL Wifi Setup

The WIFI setup plugin is responsible from managing the wifi setup process, additional plugins are required to provide specific wifi implementations, this plugin just coordinates the co-existence of multiple wifi setup methods

## Listens to

| Message Type                                       | Message Data                                                                                     | Description                                                       | Emitted Response Type                                                    | Handled by                    |
|----------------------------------------------------|--------------------------------------------------------------------------------------------------|-------------------------------------------------------------------|--------------------------------------------------------------------------|-------------------------------|
| `ovos.phal.wifi.plugin.register.client`            | 'client': str<br>'type': str<br>'display_text': str<br>'has_gui': bool<br>'requires_input': bool | Register a wifi setup client with the plugin                      | `ovos.phal.wifi.plugin.client.registered`                                | handle_register_client        |
| `ovos.phal.wifi.plugin.deregister.client`          | 'client': str                                                                                    | Deregister a wifi setup client from the plugin                    | `ovos.phal.wifi.plugin.client.deregistered`                              | handle_deregister_client      |
| `ovos.phal.wifi.plugin.get.registered.clients`     |                                                                                                  | Get the list of registered clients                                | `ovos.phal.wifi.plugin.registered.clients`                               | handle_get_registered_clients |
| `ovos.phal.wifi.plugin.set.active.client`          | 'client': str<br>'id': str                                                                       | Activate a wifi setup client                                      | `ovos.phal.wifi.plugin.activate.{clientID}`                              | handle_set_active_client      |
| `ovos.phal.wifi.plugin.remove.active.client`       |                                                                                                  | Deactivate a wifi setup client                                    | `ovos.phal.wifi.plugin.deactivate.{clientID}`                            | handle_remove_active_client   |
| `ovos.phal.wifi.plugin.client.setup.failure`       |                                                                                                  | Informs the plugin that the wifi setup failed                     |                                                                          | handle_client_setup_failure   |
| `ovos.phal.wifi.plugin.client.select`              | 'client': str<br>'id': str                                                                       | Informs the plugin about the user selected setup mechanism        |                                                                          | handle_client_select          |
| `ovos.phal.wifi.plugin.skip.setup`                 |                                                                                                  | Informs the plugin that user wants to do setup later              | `ovos.phal.wifi.plugin.fully_offline`                                    | handle_skip_setup             |
| `ovos.phal.wifi.plugin.fully_offline`              |                                                                                                  | Notify that the user has selected fully offline operation         | `ovos.phal.wifi.plugin.fully_offline`                                    | handle_fully_offline          |
| `ovos.phal.wifi.plugin.client.select.page.removed` |                                                                                                  |                                                                   |                                                                          | handle_setup_page_removed     |
| `ovos.phal.wifi.plugin.user.activated`             |                                                                                                  | Inform the plugin that the user has activated a wifi setup client |                                                                          | handle_user_activated         |
| `mycroft.internet.connected`                       |                                                                                                  | Inform the plugin that the internet is connected                  |                                                                          | handle_internet_connected     |
| `ovos.phal.wifi.plugin.status`                     |                                                                                                  | Report status of wifi setup plugin                                | `ovos.phal.wifi.plugin.status,response`<br>`ovos.phal.wifi.plugin.alive` | handle_ready_check            |
| `mycroft.internet.is_ready`                        |                                                                                                  |                                                                   |                                                                          | handle_ready_check            |

## Emits

| Message Type                                        | Message Data                                                                                                  | Description                                                          | Trigger Message Type                           | Emitted by                       |
|-----------------------------------------------------|---------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------|------------------------------------------------|----------------------------------|
| `ovos.phal.wifi.plugin.alive`                       |                                                                                                               | Inform the wifi clients that the plugin is alive on startup          | `ovos.phal.wifi.plugin.status`                 | on load<br>handle_status_request |
| `ovos.phal.wifi.plugin.client.registration.failure` | "error": "str"                                                                                                | Registration failed                                                  |                                                | handle_register_client           |
| `ovos.phal.wifi.plugin.client.registered`           | "client": str<br>"type": str<br>"display_text": str<br>"has_gui": bool<br>"requires_input": bool<br>"id": str | Registration successful                                              |                                                | handle_register_client           |
| `ovos.phal.wifi.plugin.client.deregistered`         | "client": str                                                                                                 | Deregistration successful                                            |                                                | handle_deregister_client         |
| `ovos.phal.wifi.plugin.registered.clients`          | "clients": list                                                                                               | Report registered wifi setup clients                                 | `ovos.phal.wifi.plugin.get.registered.clients` | handle_get_registered_clients    |
| `ovos.phal.wifi.plugin.activate.{clientID}`         |                                                                                                               | Inform the client that the activation was successful                 |                                                | handle_set_active_client         |
| `ovos.phal.wifi.plugin.deactivate.{clientID}`       |                                                                                                               | Inform the client that the deactivation was successful               | `mycroft.internet.connected`                   | handle_remove_active_client      |
| `ovos.phal.wifi.plugin.fully_offline`               |                                                                                                               | Notify that the user has selected fully offline operation            |                                                | handle_fully_offline             |
| `ovos.phal.wifi.plugin.status.response`             | "watchdog_active": bool<br>"in_setup": bool                                                                   | Notify setup and watchdog status                                     | `ovos.phal.wifi.plugin.status`                 | handle_status_request            |
| `ovos.phal.wifi.plugin.setup.launched`              |                                                                                                               | Inform about the start of wifi setup process                         |                                                | launch_networking_setup          |
| `ovos.phal.wifi.plugin.setup.failed`                | "error": "str"                                                                                                | Inform the interested parties that the plugin itself failed          |                                                | launch_networking_setup          |
| `ovos.phal.wifi.plugin.setup.completed`             |                                                                                                               | Inform about the end of wifi setup. typically on internet connection |                                                | handle_internet_connected        |
| `ovos.shell.status.ok`                              |                                                                                                               | Make sure the GUI spinner is dismissed                               |                                                | handle_internet_connected        |
| `mycroft.internet.is_ready.response`                | "status": bool                                                                                                | Report to ovos-core if internet setup has finished                   | `mycroft.internet.is_ready`                    | handle_ready_check               |
| `ovos.phal.wifi.plugin.stop.setup.event`            |                                                                                                               | Abort ongoing wifi setup, typically during shutdown                  |                                                | stop_setup                       |
| `enclosure.notify.no_internet`                      |                                                                                                               | Signal other PHAL plugins there is no internet available             |                                                | _watchdog                        |